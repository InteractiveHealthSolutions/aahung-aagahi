<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

	<property name="schemaName" value="aagahi"
		dbms="mysql,oracle,postgresql" />

	<changeSet author="owais.hussain" id="28072019-1">
		<preConditions onFail="MARK_RAN">
			<not>
				<tableExists tableName="privileges" schemaName="${schemaName}" />
			</not>
		</preConditions>
		<createTable catalogName="${schemaName}"
			tableName="privileges">
			<column name="privilege_name" type="VARCHAR(45)">
				<constraints nullable="false" />
			</column>
			<column name="uuid" type="VARCHAR(38)">
				<constraints nullable="false" />
			</column>
		</createTable>
	</changeSet>
	<changeSet author="owais.hussain" id="30072019-1" failOnError="false">
		<!-- Caution! Without this user (admin), the API will not do anything -->
		<insert tableName="users">
            <column name="user_id" value="1"/>
            <column name="username" value="admin"/>
            <column name="full_name" value="Administrator"/>
            <column name="password_hash" value="$2a$13$gx/uKyuHpMS.iq9jWszTLe9CIazrlMnMYI8Ejsbqxuk7sTEhE6WaC"/>
            <column name="uuid" value="254d77c9-ae23-11e9-940b-f430b9535733"/>
            <column name="date_created" value="2019-07-24 19:56:15"/>
            <column name="voided" valueBoolean="false"/>
        </insert>
	</changeSet>

</databaseChangeLog>